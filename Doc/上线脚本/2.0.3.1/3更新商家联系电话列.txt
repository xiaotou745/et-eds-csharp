use superman
go
declare @countrow INT
  --受影响行数
set @countrow = 565  --预计受影响行数

begin transaction
--执行
update business set PhoneNo2=PhoneNo
where Id in(
select id from business where isnull(PhoneNo2,'')=''
)

if ( @@error <> 0
     or @@rowcount <> @countrow
   ) 
    begin
        rollback
        print 'RollBack'
        return
    end

print 'Commit Start'
commit
print 'Commit Over'