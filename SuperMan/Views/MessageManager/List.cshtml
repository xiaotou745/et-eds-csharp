@model ETS.Data.PageData.PageInfo<Ets.Model.DataModel.Message.MessageModel>
@using ETS.Enums
@using ETS.Extension
@using Webdiyer.WebControls.Mvc;
@{
    ViewBag.Title = "消息群发管理";
    Layout = "~/Views/Shared/_LayoutNew.cshtml";
}
<link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />
<script src="~/Scripts/jquery-1.8.2.js"></script>
<script src="~/Scripts/jquery-ui-1.8.20.js"></script>
<script src="~/Scripts/jquery.ui.datepicker-zh-CN.js"></script>
<script type="text/javascript" src="~/Content/jQuery-File-Upload/js/jquery.iframe-transport.js"></script>
<div class="zpManage zpSh">
    <h2 class="crumbs">
        您所在位置 消息管理> 消息群发管理
    </h2>
    @using (Ajax.BeginForm("PostList", new RouteValueDictionary { { "pageindex", "" } },
        new AjaxOptions { UpdateTargetId = "dataList", InsertionMode = InsertionMode.Replace },
        new RouteValueDictionary { { "id", "searchForm" } }))
    {
        <div class="SearchMd">
            <table>
                <tr>
                    <td>
                        <input type="button" value="添加消息" class="searchBtn" id="btnAddMessage" onclick="addMessage();" />
                    </td>

                </tr>
                <tr>
                    <td>
                        <span class="">推送方式: </span>
                        @Html.DropDownList("PushWay", new SelectList(EnumExtenstion.GetEnumItems(typeof(MessagePushWay)), "Value", "Text"), "全部", new { @class = "selectw", style = "width:143px" })
                        <span class="">消息类型: </span>
                        @Html.DropDownList("MessageType", new SelectList(EnumExtenstion.GetEnumItems(typeof(MessageMessageType)), "Value", "Text"), "全部", new { @class = "selectw", style = "width:143px" })
                        <span class="">消息状态: </span>
                        @Html.DropDownList("SentStatus", new SelectList(EnumExtenstion.GetEnumItems(typeof(MessageSentStatus)), "Value", "Text"), "全部", new { @class = "selectw", style = "width:143px" })
                        <span class="">发布类型: </span>
                        @Html.DropDownList("SendType", new SelectList(EnumExtenstion.GetEnumItems(typeof(MessageSendType)), "Value", "Text"), "全部", new { @class = "selectw", style = "width:143px" })
                    </td>

                </tr>
                <tr>
                    <td>
                        <span class="">推送时间: </span>
                        <input id="txtPubDateStart" readonly="readonly" type="text" name="PubDateStart" />
                        <span class="">到: </span>
                        <input id="txtPubDateEnd" readonly="readonly" type="text" name="PubDateEnd" />
                        <input type="submit" value="查询" class="searchBtn" id="btnSearch" />
                    </td>
                </tr>
            </table>
        </div>
    }
    <script type="text/javascript" src="/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <div class="bd clearfix" id="dataList">
        @Html.Partial("PostList", Model)
    </div>
</div>
<script type="text/javascript">
    //添加消息
    function addMessage() {
        window.location.href = "/MessageManager/MessageEdit";
    }

</script>

<script src="~/Scripts/view/MessageManagerList.js" type="text/javascript"></script>
<script src="~/Scripts/mvcpager.js"></script>

