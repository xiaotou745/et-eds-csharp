@model SuperManCommonModel.Models.HomeCountManage
@{
    ViewBag.Title = "后台统计";
}

<h3 style="color:black;font-weight:600">数据统计</h3>
<div>
    @{
        var resultList = @ViewBag.homeCountTitleModel as SuperManCommonModel.Models.HomeCountTitleModel;
        <p>签约商户：@resultList.SignBusiness 家  已申请超人：@resultList.ApplySuperMan 个，通过超人 @resultList.AuditPassSuperMan 个，今日订单： @resultList.TodayOrders ，今日订单金额： @resultList.TodayOrdersAmount 元</p>
    }
</div>
<hr />
<h4 style="color:black;font-weight:600">订单统计</h4>
<select name="select" class="selectw" id="orderCountSelect" style="margin-bottom:5px; width:143px">
    <option value="1">今日</option>
    <option value="2">本周</option>
    <option value="3">本月</option>
</select>
<br />
<div class="bd clearfix" id="dataListOrder">
    @Html.Partial("_PartialOrderCount", Model.orderCountManageList)
</div>
<hr />
<h4 style="color:black;font-weight:600">超人统计</h4>
<select name="select" class="selectw" id="supermanCountSelect" style="margin-bottom:5px;width:143px">
    <option value="1">今日</option>
    <option value="2">本周</option>
    <option value="3">本月</option>
</select>
<div class="bd clearfix" id="dataListSuperMan">
    @Html.Partial("_PartialSuperManCount", Model.clientCountManagerList.clienterCountManageList)
</div>
<hr />
<h4 style="color:black;font-weight:600">商户统计</h4>
<select name="select" class="selectw" id="busiCountSelect" style="margin-bottom:5px;width:143px">
    <option value="1">今日</option>
    <option value="2">本周</option>
    <option value="3">本月</option>
</select>
<div class="bd clearfix" id="dataListBusi">
    @Html.Partial("_PartialBisuCount", Model.busiCountManagerList.businessCountManageList)
</div>

<script type="text/javascript">
    var DEFAULT_PAGESIZE = 15;
    var criteria = { PagingRequest: { PageIndex: 0, PageSize: DEFAULT_PAGESIZE } };
    $(function () {
        
        $("#supermanCountSelect").on("change", function () {
            var status = $("#supermanCountSelect").val();
            var url = "/HomeCount/supermanCount";
            refresh(0, url, status, "dataListSuperMan");
        });
        $("#busiCountSelect").on("change", function () {
            var status = $("#busiCountSelect").val();
            var url = "/HomeCount/busiCount";
            refresh(0, url, status, "dataListBusi");
        });
    });
    ////分页
    art.ui.control.Pager.enablePaging(document, refresh);
    function refresh(pageIndex, url, status, controlId) {

        if (pageIndex !== undefined) {
            criteria.PagingRequest.PageIndex = pageIndex;
        }
        criteria.searchType = status;
        webExpress.utility.ajax.request
            (
                url,
                criteria,
                function (data) {
                    $("#" + controlId).html(data);
                });
    };
</script>
